<div class="outer" [@fadeInOut]>
    <ng-container *ngIf="products.length != 0">
        <div class="container">
    
            <div class="row mt-4">
                
        
                <div class="card-table col-10 m-auto">
                    <div class="cart-product shadow p-4 rounded">
                        <table class="table table-responsive">
                            <thead>
                                <tr>
                                    <th>Sr.No</th>
                                    <th>Product Name</th>
                                    <th>Picture</th>
                                    <th>Price</th>
                                    <th class="text-center">Quantity</th>
                                    <th class="text-center">Total</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of products; let i = index" >
                                    <td>{{i+1}}</td>
                                    <td>{{item.productName}}</td>
                                    <td class="profile-pic"> 
                                        <img src="{{picPath}}/{{item.picture}}" alt="Profile Picture" height="80px" width="80px" style="border-radius: 10px;"/>
                                      </td>
                                    <td>{{item.sellPrice}}</td>
                                    <td>
                                        <div class="quantity">
                                            <button (click)="decreaseQuantity(item)" class="quantity-decrement">
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <input type="number" [(ngModel)]="item.quantity" class="quantity-input" min="1" max="100">
                                            <button (click)="increaseQuantity(item)" class="quantity-increment">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </td>
                                    <td class="text-center">{{item.total}}</td>
                                    <td class="text-center">
                                        <button (click)="removeItem(item)" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
                                    </td>
                                </tr>
                                <tr colspan="4">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td class="text-center"><strong>Grand Total : ${{grandTotal}}</strong></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    
                        
                        <div class="d-flex justify-content-between">
                            <button routerLink="/product-cart" class="btn btn-primary">
                                <i class="fas fa-shopping-cart"></i> Shop More
                            </button>
                            <button (click)="checkout()" class="btn btn-success">
                                <i class="fas fa-credit-card"></i> Checkout
                            </button>
                            <button (click)="emptycart()" class="btn btn-danger">
                                <i class="fas fa-trash-alt"></i> Empty Cart
                            </button>             
                        </div>
                        
                     
                    </div>
                </div>
    
    
                <div class="col-10 m-auto d-flex justify-content-end">
                    <button (click)="closeCart()" class="btn btn-secondary mt-4">
                        <i class="fas fa-times"></i> Close Cart
                      </button>
                </div>
    
            </div>
            
        </div>
    </ng-container>
    
    
    
    
    <ng-container *ngIf="products.length === 0">
        <div class="empty-cart mt-5">
            
            <div class="empty-cart-text mt-5">
                <h3>Your cart is empty!</h3>
                <p>Add items to it now and start shopping.</p>
            </div>
            <button routerLink="/product-cart" class="btn btn-primary empty-cart-button">
                Shop Now
            </button>
        </div>
    </ng-container>



     <!-- For Animation -->
     <div *ngFor="let bubble of bubbles" class="bubble" [style.top]="bubble.top" [style.left]="bubble.left"
     [style.width]="bubble.size" [style.height]="bubble.size" [style.background-color]="bubble.color"
     [style.animation-delay]="bubble.delay + 's'" (animationend)="onAnimationEnd(bubble)"></div>


</div>









<!-- <ng-container *ngIf="products.length != 0">
    <div class="container">
        <div class="card-table">
            <div class="cart-product">
                <table class="table table-responsive text-black">
                    <thead>
                        <tr>
                            <th>Sr.No</th>
                            <th>Product Name</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Total</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of products; let i = index">
                            <td>{{i+1}}</td>
                            <td>{{item.productName}}</td>
                            <td>{{item.price}}</td>
                            <td>
                                <div class="quantity">
                                    <button (click)="decreaseQuantity(item)" class="decrement-btn">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" [(ngModel)]="item.quantity" class="quantity-input" min="1" max="100">
                                    <button (click)="increaseQuantity(item)" class="increment-btn">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </td>
                            <th>{{item.total}}</th>
                            <td>
                                <button (click)="removeItem(item)" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="4"></td>
                            <td><button (click)="emptycart()" class="btn btn-danger">Empty Cart</button></td>
                            <td><button routerLink="/product-cart" class="btn btn-primary">Shop More</button></td>
                            <td><button class="btn btn-success">Checkout</button></td>
                            <td><strong>Grand Total : ${{grandTotal}}</strong></td>
                            <td><button (click)="closeCart()" class="btn btn-secondary" [@fadeInOut]>
                                <i class="fas fa-times"></i>
                              </button>
                              </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</ng-container>

<ng-container *ngIf="products.length === 0">
    <div class="empty-cart">
        <div class="cart-image">
            <img mat-card-avatar src="../../../../assets/cart.png" />
        </div>
        <div class="empty-cart-text">
            <h3>Your cart is empty!</h3>
            <p>Add items to it now and start shopping.</p>
        </div>
        <button routerLink="/product-cart" class="btn btn-primary empty-cart-button">
            Shop Now
        </button>
    </div>
</ng-container> -->
















<!-- <div class="cart-container" *ngIf="products.length != 0">
    <div class="cart-header">
      <h2>Shopping Cart</h2>
      <button class="close-button" (click)="closeCart()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of products">
        <img src="{{ item.image }}" alt="{{ item.productName }}">
        <div class="cart-item-details">
          <h4>{{ item.productName }}</h4>
          <p>{{ item.price }}</p>
          <div class="cart-item-quantity">
            <button (click)="decreaseQuantity(item)">
              <i class="fas fa-minus"></i>
            </button>
            <input type="number" [(ngModel)]="item.quantity" min="1" max="100">
            <button (click)="increaseQuantity(item)">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <button class="remove-button" (click)="removeItem(item)">Remove</button>
        </div>
      </div>
    </div>
    <div class="cart-footer">
      <div class="cart-total">
        <p>Total: ${{ grandTotal }}</p>
      </div>
      <div class="cart-buttons">
        <button class="checkout-button">Checkout</button>
        <button class="clear-button" (click)="emptycart()">Clear Cart</button>
      </div>
    </div>
  </div>
  
  <div class="empty-cart" *ngIf="products.length === 0">
    <img src="../../../../assets/cart.png" alt="Empty Cart">
    <h3>Your cart is empty!</h3>
    <p>Add items to it now and start shopping.</p>
    <button routerLink="/product-cart" class="shop-now-button">Shop Now</button>
  </div> -->
  