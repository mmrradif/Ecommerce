<div class="outer row" [@fadeInOut]>

    <mat-card class="mat-elevation-z3  p-5 col-8 m-auto" style="background-color: rgba(252, 254, 253, 0.5);">

        <mat-card-header class="d-flex justify-content-center">
      
        <img mat-card-avatar src="../../../../assets/products-svgrepo-com.svg" />

          <mat-card-title>Add Product</mat-card-title>
          <mat-card-subtitle>Add new Product</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
      
          <form [formGroup]="productForm" class="form-container p-4" (ngSubmit)="save()" style="background-color: rgba(252, 254, 253, 0.3);">

            <mat-form-field appearance="fill" class="f-w mb-1">
              <mat-label>Product Name</mat-label>
              <input matInput formControlName="productName">
              <mat-error *ngIf="productForm.controls['productName'].hasError('required')">
                <strong>
                  Product
                  name
                </strong> required
              </mat-error>
      
            </mat-form-field>

            <mat-form-field appearance="fill" class="f-w mb-1">
              <mat-label>Description</mat-label>
              <input matInput formControlName="description">
              <mat-error *ngIf="productForm.controls['description'].hasError('required')">
                <strong>Description</strong> required
              </mat-error>
            </mat-form-field>



            <mat-form-field appearance="fill" class="f-w mb-1">
              <mat-label>Category Name</mat-label>
              <mat-select formControlName="categoryName">
                <mat-option *ngFor="let option of categoryOptions" [value]="option">
                  {{ option }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="productForm.controls['categoryName'].hasError('required')">
                <strong>Category</strong> is required
              </mat-error>
            </mat-form-field>


            <mat-form-field appearance="fill" class="f-w mb-1">
              <mat-label>Price</mat-label>
              <input matInput formControlName="price">
              <mat-error *ngIf="productForm.controls['price'].hasError('required')"><strong>Price</strong> required</mat-error>

            </mat-form-field>



            <mat-form-field appearance="fill" class="f-w mb-1">
              <mat-label>Sell Price</mat-label>
              <input matInput formControlName="sellPrice">
              <mat-error *ngIf="productForm.controls['sellPrice'].hasError('required')">
                <strong>Sell Price</strong> is required
              </mat-error>
            </mat-form-field>


            <mat-form-field appearance="fill" class="f-w mb-1">
              <mat-label>Picture</mat-label>
              <button mat-icon-button matPrefix (click)="f_input.click()">
                <mat-icon>attach_file</mat-icon>
              </button>
              <input type="text" readonly matInput formControlName="picture" />
              <input type="file"
                     multiple
                     hidden
                     #f_input
                     (change)="handleFileInputChange($event)" />
              <mat-error>this field is required</mat-error>
            </mat-form-field>
    
            <div class="f-w mb-1">
              <mat-checkbox formControlName="isAvailable" class="c-m">Available</mat-checkbox>
            </div>
    
    
            <div class="f-w mt-4">
              <button type="submit" mat-raised-button color="primary" [disabled]="productForm.invalid"><mat-icon>save</mat-icon>  Save</button>
            </div>
          </form>
      
      
        </mat-card-content>
    
        <mat-card-actions class="d-flex justify-content-end" style="width: 95%;">
          <a mat-flat-button color="accent" [routerLink]="['/products']"><mat-icon>arrow_back</mat-icon></a>
        </mat-card-actions>
      </mat-card>

       <!-- For Animation -->
   <div *ngFor="let bubble of bubbles" class="bubble" [style.top]="bubble.top" [style.left]="bubble.left"
   [style.width]="bubble.size" [style.height]="bubble.size" [style.background-color]="bubble.color"
   [style.animation-delay]="bubble.delay + 's'" (animationend)="onAnimationEnd(bubble)"></div>

</div>
  